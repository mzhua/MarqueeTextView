æ”¯æŒè·‘é©¬ç¯æ•ˆæžœï¼Œå¹¶ä¸”ä¸ŽViewPageråŒæ—¶ä½¿ç”¨æ—¶ä¸ä¼šå½±å“ViewPagerçš„å·¦å³æ»‘åŠ¨æ‰‹åŠ¿

è½¬è½½è¯·æ³¨æ˜Žä¸‹å‡ºå¤„å°±å¥½ï¼Œéœ€è¦ä½¿ç”¨ï¼Œå¯è‡ªè¡Œçœ‹å®žçŽ°æˆ–è€…copyè¿‡åŽ»ç”¨å°±å¥½ã€‚

## åœºæ™¯

0. ä¸šåŠ¡æœ‰ä¸€ä¸ªé¡µé¢ä¸ºä¸‰ä¸ªtabï¼Œä½¿ç”¨ViewPageræ¥å®žçŽ°ï¼Œä¸­é—´é¡µé¢çš„ä¸­é—´æ­Œåæ˜¾ç¤ºéƒ¨åˆ†ç”±äºŽå¯èƒ½æ–‡å­—è¿‡é•¿ï¼Œæ‰€ä»¥å›žé™å®šæœ€å¤§å®½åº¦ï¼Œè¶…è¿‡ä¹‹åŽå°±è®¾ç½®marqueeæ•ˆæžœã€‚
   åˆ°è¿™é‡Œï¼Œåº”è¯¥éƒ½è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œç½‘ä¸Šä¹Ÿæ˜¯å„ç§èµ„æ–™ï¼Œé‡å†™TextViewä¸­çš„focusï¼Œå¹¶ä¸”å†™æ­»è¿”å›žtrueå³å¯ã€‚

1. ç¬¬ä¸€æ­¥å®žçŽ°äº†ä¹‹åŽå‘çŽ°é—®é¢˜äº†ï¼Œå¦‚æžœåœ¨ä¸Šé¢çš„æ–‡å­—åŒºåŸŸå·¦å³æ»‘åŠ¨ï¼ŒViewPageræ»‘åŠ¨ä¸äº†äº†

åŸºäºŽè¿™ä¸ªåœºæ™¯å¯¹äºŽTextViewçš„Marqueeæ•ˆæžœå¯¹ViewPagerçš„å½±å“è¿›è¡Œäº†ä¸€ç•ªåˆ†æžï¼ŒStack Overflowä¸Šä¹Ÿæœ‰ç±»ä¼¼é—®é¢˜ï¼Œä½†éƒ½æ²¡æœ‰å¾ˆå¥½çš„çš„è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œ
æ‰€ä»¥åœ¨æ­¤åˆ†æžä¸‹å…·ä½“é€»è¾‘ï¼Œç»™æœ‰éœ€è¦çš„æä¾›ä¸ªè§£å†³è¿™ç§æƒ…å†µçš„æ–¹æ³•ã€‚

## åˆ†æžï¼š

### çŒœæµ‹ä¸€   äº‹ä»¶è¢«`TextView`æ‹¦æˆªæ¶ˆè´¹äº†
0. å½“å‘çŽ°è§¦æ‘¸è®¾ç½®äº†marqueeæ•ˆæžœçš„ `TextView` åŒºåŸŸå°±æ— æ³•æ»‘åŠ¨ `ViewPager` æ—¶ï¼Œæœ€å¼€å§‹çš„æƒ³æ³•å°±æ˜¯ï¼Œäº‹ä»¶ä¼ é€’ç»™TextViewåŽï¼Œè‚¯å®šæ˜¯è¢«TextViewæ‹¦æˆªäº†ï¼Œ
   æ‰€ä»¥ViewPageræ²¡æ³•å†æŽ¥æ”¶åˆ°è¿™ä¸ªäº‹ä»¶ã€‚
1. åˆæ­¥è®¤ä¸ºåº”è¯¥å°±æ˜¯æ¯”è¾ƒç®€å•çš„äº‹ä»¶å†²çªé—®é¢˜ï¼Œæ²¿ç€è¿™ä¸ªæ€è·¯ï¼Œé¦–å…ˆçš„æƒ³æ³•å°±æ˜¯ï¼Œé‚£è¿™æ ·çš„è¯åªè¦è®©TextViewä¸åŽ»æŽ¥æ”¶å¤„ç†äº‹ä»¶å°±å¥½äº†ï¼Œæ‰€ä»¥å¼€å§‹è¯•éªŒå°±æ˜¯
   æƒ³åˆ°å°† `TextView` çš„ `clickable` å’Œfocusè®¾ç½®ä¸ºfalseï¼Œä½†æ˜¯æ— é™å¾ªçŽ¯æ»šåŠ¨åˆéœ€è¦focusä¸ºtrueï¼Œæ‰€ä»¥è¿™ä¸ªè·¯å­è²Œä¼¼èµ°ä¸ä¸‹åŽ»äº†ã€‚
2. é‚£æ—¢ç„¶åˆæ­¥ç¡®å®šæ˜¯äº‹ä»¶è¢«æ‹¦æˆªçš„é—®é¢˜ï¼Œåˆä¸èƒ½é€šè¿‡è®¾ç½® clickable å’Œ focus è®¾ç½®ä¸º `false` æ¥è§£å†³ï¼Œé‚£å°±åœ¨ `TextView` å¤–é¢å†å¥—ä¸€å±‚ `ViewGroup`ï¼Œå¹¶ä¸”åœ¨  `ViewGroup`
   ä¸­æ‹¦æˆªè¿™ä¸ªäº‹ä»¶ä¸è®©å¾€ä¸‹ä¼ å°±å¥½äº†ã€‚æƒ³æƒ³è¿˜æ˜¯æ¯”è¾ƒç®€å•ï¼Œæ»¡å¿ƒæ¬¢å–œçš„å†™äº†ä¸ªæ‹¦æˆªäº‹ä»¶çš„ç±»ï¼Œå¥—ä¸€ä¸‹ `TextView`ã€‚
3. ç»è¿‡2åˆ†é’Ÿç¼–è¯‘......
4. è¿è¡ŒæŸ¥çœ‹æ•ˆæžœ
5. å°´å°¬ðŸ˜“ï¼Œåœ¨é‚£ä¸ªåŒºåŸŸè¿˜æ˜¯æ— æ³•å·¦å³æ»‘åŠ¨
6. è¿™ä¸ªè¡¨å±‚åˆæ­¥çš„çŒœæµ‹ä»¥å¤±è´¥å‘Šç»ˆ
7. ä¸å¾—ä¸å¼€å§‹å•æ­¥æ–­ç‚¹è°ƒè¯•äº†ï¼Œè°ƒè¯•çš„ç»“æžœå°±æ˜¯ï¼ŒMoveäº‹ä»¶åŽ‹æ ¹æ²¡æœ‰åˆ°ä¸‹å±‚

### çŒœæµ‹äºŒ   äº‹ä»¶ä¸Šå±‚ï¼ˆViewPagerï¼‰è‡ªå·±æ²¡å¤„ç†
0. æ—¢ç„¶`Move`äº‹ä»¶ä¸‹å±‚æ²¡æœ‰å¤„ç†ï¼Œé‚£äº‹ä»¶è‚¯å®šå°±æ˜¯å›žåŽ»äº†`ViewPager`ï¼Œé‚£ä¹ˆåªæœ‰çœ‹çœ‹`ViewPager`çš„`onInterceptTouchEvent`å’Œ`onTouchEvent`é‡Œé¢åˆ°åº•å¹²äº†å•¥äº†/(ã„’oã„’)/~~
1. ç»è¿‡ä¸€ç³»åˆ—æ— èŠçš„è°ƒè¯•ï¼Œå‘çŽ°äº† `onInterceptTouchEvent` ä¸­ `MotionEvent.ACTION_MOVE` äº‹ä»¶æ—¶ `return` äº† `false`ï¼Œè¿™ä¸ªå°±å¾ˆå°´å°¬äº†ï¼Œ`ViewPager` æ˜Žæ˜Ž
   æœ‰ä¸‰ä¸ªitemï¼Œæ€Žä¹ˆå¯èƒ½ä¸æ»‘åŠ¨äº†ï¼Œå†ç»†ç»†æŽ¢ç©¶è¿™ä¸ªäº‹ä»¶é‡Œé¢çš„å¤„ç†ï¼Œå‘çŽ°è¿™ä¸ªäº‹ä»¶å¤„ç†è°ƒç”¨äº†ä¸ªæ–¹æ³•ï¼š
   
   
   `
      protected boolean canScroll(View v, boolean checkV, int dx, int x, int y) {
           if (v instanceof ViewGroup) {
               final ViewGroup group = (ViewGroup) v;
               final int scrollX = v.getScrollX();
               final int scrollY = v.getScrollY();
               final int count = group.getChildCount();
               // Count backwards - let topmost views consume scroll distance first.
               for (int i = count - 1; i >= 0; i--) {
                   // TODO: Add versioned support here for transformed views.
                   // This will not work for transformed views in Honeycomb+
                   final View child = group.getChildAt(i);
                   if (x + scrollX >= child.getLeft() && x + scrollX < child.getRight()
                           && y + scrollY >= child.getTop() && y + scrollY < child.getBottom()
                           && canScroll(child, true, dx, x + scrollX - child.getLeft(),
                                   y + scrollY - child.getTop())) {
                       return true;
                   }
               }
           }

           return checkV && v.canScrollHorizontally(-dx);
       }
    `
    
2. çœ‹åˆ°è¿™é‡Œå°±æ¸…æ™°äº†ï¼Œè¿™é‡Œå¹²çš„æ˜¯ä»€ä¹ˆäº‹æƒ…å‘¢ï¼Œå°±æ˜¯ `ViewPager` é€’å½’çš„åŽ»é—®å®ƒæ‰€æœ‰çš„å­ `View`ï¼Œç„¶åŽè°ƒç”¨å­ `View` çš„ `canScrollHorizontally()` æ–¹æ³•
3. å¯ç®—æ˜¯æŸ³æš—èŠ±æ˜Žäº†ï¼Œæœ€åŽå°±æ˜¯è¦éªŒè¯ï¼Œæ˜¯ä¸æ˜¯åœ¨è¿™ç§è®¾ç½®äº†marqueeçš„ `TextView` ä¸Šè§¦æ‘¸å¹¶ä¸”å·¦å³æ»‘åŠ¨æ—¶ï¼Œ`TextView` çš„ `canScrollHorizontally()`
   è¿”å›žäº†trueå‘¢ï¼Ÿ
4. ç»§ç»­è°ƒè¯•ï¼Œè¯å®žäº†3çš„çŒœæµ‹
5. å¥½äº†åˆ°äº†è¿™é‡Œå°±å¥½åŠžäº†ï¼Œé‡å†™ `TextView` çš„ `canScrollHorizontally`ï¼Œè¿”å›žfalseå¥½äº†
6. è‡ªæ­¤ï¼Œå¤§åŠŸå‘Šæˆ


PSï¼šæºç é¢å‰ï¼Œæ²¡æœ‰ç§˜å¯†
